<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Prueba Web Chat CXone</title>
<script>
(function(n,u){
window.CXoneDfo=n,
window[n]=window[n]||function(){(window[n].q=window[n].q||[]).push(arguments)},window[n].u=u,
e=document.createElement("script"),e.type="module",e.src=u+"?"+Math.round(Date.now()/1e3/3600),
document.head.appendChild(e)
})('cxone','https://web-modules-de-na1.niceincontact.com/loader/1/loader.js');
cxone('init', '5780');
cxone('guide','init', { templateId: 'f50687d0-c50e-4750-8cf9-38b87a703db0' });
</script>
<style>
  #cxone-guide-container > div > div > div.entrypoint.svelte-mffmc3.simpleMode.useBiggerImage > button > div > img {
    width: 100px !important;
    height: 100px !important;
    border-radius: 50% !important;
    margin: -72px !important;
    margin-bottom: 24px !important;
  }
</style>
</head>
<body>
<h1>Prueba Web Chat CXone</h1>

<script>
console.log("Esperando que CXone cargue el elemento...");

// Función para esperar a que el elemento aparezca
function esperarElementoCXone(selector, callback, timeout = 10000) {
  const startTime = Date.now();
  
  // Verificar si ya existe
  const elementoExistente = document.querySelector(selector);
  if (elementoExistente) {
    console.log("✅ Elemento encontrado inmediatamente");
    callback(elementoExistente);
    return;
  }
  
  // Crear observer para esperar a que aparezca
  const observer = new MutationObserver(function(mutations) {
    const elemento = document.querySelector(selector);
    
    if (elemento) {
      console.log("✅ Elemento encontrado por MutationObserver");
      callback(elemento);
      observer.disconnect();
    } else if (Date.now() - startTime > timeout) {
      console.log("❌ Timeout: elemento no encontrado después de", timeout/1000, "segundos");
      observer.disconnect();
    }
  });
  
  // Observar cambios en todo el documento
  observer.observe(document.body, {
    childList: true,
    subtree: true
  });
  
  console.log("Observer iniciado, esperando elemento...");
}

// Selector del elemento
const selector = "#be-messenger > div > div.Header_Header_Z9Z4k.Header_HeaderDraggableW22Nu > div.UserProfile_UserProfileYWMXp > div.UserProfile_NameStatushyVK5 > div.UserProfile_Name_yNOQ-";

// Esperar y cambiar el texto
esperarElementoCXone(selector, function(elemento) {
  console.log("Texto original:", elemento.textContent);
  elemento.textContent = "Agente Vnet";
  console.log("Texto cambiado a:", elemento.textContent);
});
</script>

</body>
</html>